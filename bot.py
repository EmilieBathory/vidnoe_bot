import asyncio
from telethon import TelegramClient, events

# ================= –ù–ê–°–¢–†–û–ô–ö–ò =================
api_id = 30888488
api_hash = "67f114b207708b57ab5f8d15138cfd9c"
bot_token = "8479804734:AAH1CdVRaW1Jobcikse5jB7r2ovMJUv1RWQ"
target_chat = -5230145354

channels = [
    "Podslushano_Vidnoe",
]

# ================= –ö–õ–Æ–ß–ï–í–´–ï –°–õ–û–í–ê =================
local_keywords = [
    "–ø—Ä–æ–±–∫–∞", "–¥–≤–∏–∂–µ–Ω–∏–µ", "–ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ", "—Ä–µ–º–æ–Ω—Ç –¥–æ—Ä–æ–≥–∏", "–ø–ª–∞—Ç–Ω–∞—è –ø–∞—Ä–∫–æ–≤–∫–∞",
    "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç", "–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–≤–∏–∂–µ–Ω–∏—è", "—Å—Ç—Ä–æ–π–∫–∞", "—Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ", "—Ä–µ–º–æ–Ω—Ç",
    "–±–ª–∞–≥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ", "–Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç", "—à–∫–æ–ª–∞", "–¥–µ—Ç—Å–∫–∏–π —Å–∞–¥", "—Ñ–µ—Å—Ç–∏–≤–∞–ª—å",
    "–∫–æ–Ω—Ü–µ—Ä—Ç", "—è—Ä–º–∞—Ä–∫–∞", "—Å–æ–±—Ä–∞–Ω–∏–µ", "–≤—Å—Ç—Ä–µ—á–∞ —Å –∂–∏—Ç–µ–ª—è–º–∏", "–ø–∞—Ä–∫",
    "–ø–ª–æ—â–∞–¥—å", "—É–ª–∏—Ü–∞", "—Ç—Ä–æ—Ç—É–∞—Ä", "–º–æ—Å—Ç", "–æ—Å—Ç–∞–Ω–æ–≤–∫–∞", "–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞"
]

global_keywords = [
    "—Å–æ—Ü–∏–∞–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞", "–≤—ã–ø–ª–∞—Ç—ã", "–ª—å–≥–æ—Ç—ã", "–ø—Ä–æ–≥—Ä–∞–º–º–∞", "–ø—Ä–æ–≥—Ä–∞–º–º—ã",
    "–±–æ–ª—å–Ω–∏—Ü–∞", "–ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞", "–º–µ–¥–∏—Ü–∏–Ω–∞", "—ç–∫–æ–ª–æ–≥–∏—è", "–≤—ã–±—Ä–æ—Å", "—á–∏—Å—Ç–æ—Ç–∞",
    "–º—É—Å–æ—Ä", "–ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞", "–ß–ü", "–∞–≤–∞—Ä–∏—è", "–ø–æ–∂–∞—Ä", "–∑–∞–¥–µ—Ä–∂–∞–Ω–∏–µ", "–ø–æ–ª–∏—Ü–∏—è",
    "–∫—Ä–∏–º–∏–Ω–∞–ª", "–ø–æ–≥–æ–¥–∞", "–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ", "–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è", "—Ä–∞—Å–ø–æ—Ä—è–∂–µ–Ω–∏–µ",
    "–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è", "—Ä–µ—à–µ–Ω–∏–µ", "–ø—Ä–æ–µ–∫—Ç"
]

# ==================== –ë–û–¢ ====================
async def main():
    client = TelegramClient("session", api_id, api_hash)
    await client.start(bot_token=bot_token)
    print("ü§ñ –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ —Å–ª—É—à–∞–µ—Ç –∫–∞–Ω–∞–ª Podslushano_Vidnoe...")

    await client.send_message(target_chat, "‚úÖ –ë–æ—Ç –ø–æ–¥–∫–ª—é—á–∏–ª—Å—è –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ")

    @client.on(events.NewMessage(chats=channels))
    async def handler(event):
        text = event.message.text or ""
        media = event.message.media

        # –§–∏–ª—å—Ç—Ä—É–µ–º –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
        send_post = False
        if text and any(word.lower() in text.lower() for word in global_keywords):
            send_post = True
        elif text and any(word.lower() in text.lower() for word in local_keywords) and \
             ("–í–∏–¥–Ω–æ–µ" in text or "–õ–µ–Ω–∏–Ω—Å–∫–∏–π —Ä–∞–π–æ–Ω" in text):
            send_post = True
        elif media:  # –µ—Å–ª–∏ —Ç–æ–ª—å–∫–æ –º–µ–¥–∏–∞, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–æ–∂–µ
            send_post = True

        if not send_post:
            return

        # –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –µ—Å–ª–∏ –µ—Å—Ç—å —Ç–µ–∫—Å—Ç
        if text:
            msg = f"üì¢ {event.chat.title}\n\n{text}"
        else:
            msg = None

        # –ü–µ—Ä–µ—Å—ã–ª–∞–µ–º –≤–º–µ—Å—Ç–µ —Ç–µ–∫—Å—Ç + –º–µ–¥–∏–∞
        if media:
            await client.send_file(target_chat, media, caption=msg)
        elif msg:
            await client.send_message(target_chat, msg)

    await client.run_until_disconnected()

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
asyncio.run(main())
